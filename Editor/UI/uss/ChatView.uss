/* ChatView main stylesheet */

/* Main container styles */
.chat-container {
    flex-direction: column;
    flex-grow: 1;
    background-color: rgba(30, 30, 30, 0.95);
    border-radius: 8px;
    overflow: hidden;
    min-height: 400px;
    min-width: 350px;
    width: 100%;
    height: 100%;
    max-height: 100%;
    display: flex;
    align-items: stretch;
    justify-content: flex-start;
}

/* Top toolbar styles */
.chat-header {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background-color: rgba(45, 45, 45, 0.9);
    border-bottom-width: 1px;
    border-bottom-color: rgba(100, 100, 100, 0.3);
    min-height: 50px;
    overflow: visible;
}

/* Session tabs area styles */
.session-tabs-area {
    height: 34px;
    background-color: var(--unity-colors-toolbar-background);
    border-bottom-width: 1px;
    border-bottom-color: var(--unity-colors-helpbox-border);
    flex-direction: row;
    align-items: stretch;
}

.session-tabs-scroll {
    flex: 1;
    overflow: hidden;
}

.session-tabs-container {
    flex-direction: row;
    align-items: stretch;
    height: 100%;
    padding: 2px 4px 0 4px;
}

/* Add tab button */
.tab-function-button {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background-color: transparent;
    border-width: 0;
    margin: 3px 8px 3px 4px;
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    color: var(--unity-colors-default-text-inactive);
    transition-duration: 0.2s;
}

.tab-function-button:hover {
    background-color: rgba(120, 180, 255, 0.25);
    color: rgba(255, 255, 255, 1);
    border-width: 1px;
    border-color: rgba(120, 180, 255, 0.8);
    transition-duration: 0.15s;
}

.tab-function-button:active {
    background-color: var(--unity-colors-helpbox-background-selected);
}

.header-left {
    flex-direction: row;
    align-items: center;
    flex-grow: 1;
}

.header-right {
    flex-direction: row;
    align-items: center;
}

.dropdown-content {
    flex-direction: column;
    padding: 4px 0;
}

.dropdown-item {
    background-color: transparent;
    border-width: 0;
    padding: 8px 16px;
    min-height: 32px;
    color: rgba(255, 255, 255, 0.9);
    font-size: var(--font-size-base);
    -unity-text-align: middle-left;
    justify-content: flex-start;
    transition-duration: 0.15s;
}

.dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 1);
}

.dropdown-item:active {
    background-color: rgba(255, 255, 255, 0.15);
}

.dropdown-separator {
    height: 1px;
    background-color: rgba(100, 100, 100, 0.3);
    margin: 4px 8px;
}

/* Chat history area styles */

.messages-container {
    flex-direction: column;
    flex-grow: 0;        /* No auto-fill, based on content size */
    flex-shrink: 0;      /* No auto-shrink */
    padding: 0; /* Remove fixed padding, controlled by system */
    width: 100%;
    min-height: auto;    /* Auto-adjust height based on content */
    max-height: none;    /* No max height limit, let scroll view handle */
    overflow: visible;
    align-items: stretch;
    justify-content: flex-start; /* Arrange from top, no even distribution */
}

.welcome-message {
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    margin-bottom: 20px;
}

.welcome-text {
    font-size: var(--font-size-larger);
    -unity-font-style: bold;
    color: rgba(220, 220, 220, 0.9);
    margin-bottom: 8px;
    -unity-text-align: middle-center;
}

.welcome-subtext {
    font-size: var(--font-size-base);
    color: rgba(150, 150, 150, 0.8);
    -unity-text-align: middle-center;
}

/* Message row container - clean alignment */
.message-row {
    width: 100%;
    flex-direction: row;
    margin-bottom: 0;    /* Spacing completely controlled by Sequential Rendering system */
    align-items: flex-start;
    padding: 0 16px;  /* Slightly increase left/right padding for readability */
}

/* User message right alignment */
.message-row.user-message {
    justify-content: flex-end;
    padding-left: 25%;   /* Leave more space on left side of user messages */
    padding-right: 12px;
}

/* AI message left alignment */
.message-row.ai-message {
    justify-content: flex-start;
    padding-left: 12px;
    padding-right: 25%;  /* Leave more space on right side of AI messages */
}

/* System message center alignment */
.message-row.system-message {
    justify-content: center;
    padding: 0 8px;
}

/* Error message center alignment */
.message-row.error-message {
    justify-content: center;
    padding: 0 8px;
}

/* Message container styles - clean invisible design */
.message-bubble {
    max-width: 100%;     /* Maximum width within row container */
    min-width: 250px;    /* Increase minimum width to ensure message box has proper visual weight */
    padding: 4px 0;      /* Further reduce vertical spacing, works with Sequential Rendering */
    border-radius: 0;    /* Remove rounded corners */
    background-color: transparent; /* Invisible background */
    transition-duration: 200ms;
    flex-shrink: 1;      /* Allow appropriate shrinking */
    flex-grow: 0;        /* Don't auto-expand */
    flex-direction: column;
    display: flex;
    align-items: stretch;
    justify-content: flex-start;
    overflow: visible;   /* Allow content to be visible */
    border-width: 0;     /* Remove all borders */
}

/* Message header styles */
.message-header {
    flex-direction: row;
    align-items: center;
    justify-content: flex-start; /* æ”¹ä¸ºå·¦å¯¹é½ */
    margin-bottom: 6px;
    display: flex; /* Always show, no hover effect */
}

.message-header-left {
    flex-direction: row;
    align-items: center;
    margin-right: 12px; /* Maintain proper spacing with button area */
    flex-grow: 0; /* Don't expand, let buttons follow closely */
}

/* User message header right alignment */
.user-message .message-header {
    flex-direction: row-reverse;
    justify-content: flex-start;
}

.user-message .message-header-left {
    flex-direction: row-reverse;
}

.message-avatar {
    width: 0;     /* éšè—å¤´åƒ */
    height: 0;    /* éšè—å¤´åƒ */
    border-radius: 0;
    background-color: transparent;
    margin: 0;    /* å»æ‰é—´è· */
    flex-shrink: 0;
    align-items: center;
    display: none; /* å®Œå…¨éšè—å¤´åƒå…ƒç´  */
    justify-content: center;
}

.message-avatar.user-avatar {
    display: none; /* éšè—ç”¨æˆ·å¤´åƒ */
}

.message-avatar.ai-avatar {
    display: none; /* éšè—AIå¤´åƒ */
}

.sender-name {
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    color: rgba(255, 255, 255, 0.9);
    margin: 0 4px;
}

.user-message .sender-name {
    -unity-text-align: middle-right;
}

.ai-message .sender-name {
    -unity-text-align: middle-left;
}

.message-time {
    font-size: var(--font-size-small);
}

/* æ¶ˆæ¯æ–‡æœ¬æ ·å¼è°ƒæ•´ */
.message-text {
    font-size: var(--font-size-base);
    color: rgba(255, 255, 255, 0.95);
    white-space: normal;
    min-width: auto;    /* ğŸ”§ æ”¹ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé¿å…å¼ºåˆ¶æ‹‰ä¼¸ */
    margin: 0;
    padding: 0;
    -unity-text-align: upper-left; /* ğŸ”§ å¼ºåˆ¶å·¦å¯¹é½ */
    flex-grow: 0;    /* ğŸ”§ ä¸è‡ªåŠ¨æ‰©å±•ï¼Œä½¿ç”¨å†…å®¹å®½åº¦ */
    flex-shrink: 1;
    width: auto;     /* ğŸ”§ ä½¿ç”¨è‡ªåŠ¨å®½åº¦ï¼Œä¸å¼ºåˆ¶100% */
    min-height: auto;
    overflow: visible;
}

.error-message .message-text {
    color: rgba(255, 100, 100, 0.9);
    -unity-text-align: middle-center;
    -unity-font-style: italic;
}

/* AIçº¯æ–‡æœ¬æ¶ˆæ¯çš„æ–‡æœ¬æ ·å¼ */
.ai-message.text-only .message-text {
    color: rgba(220, 220, 220, 0.95);
    font-size: var(--font-size-base);
}

.message-actions {
    flex-direction: row;
    opacity: 1;  /* å§‹ç»ˆæ˜¾ç¤ºï¼Œä¸ä½¿ç”¨æ‚¬æµ®æ•ˆæœ */
    justify-content: flex-start;  /* é å·¦å¯¹é½ */
    align-items: center;
    margin-left: 0;  /* ç¡®ä¿é æœ€å·¦è¾¹ */
}

/* èŠå¤©æ“ä½œæŒ‰é’®çš„åŸºç¡€æ ·å¼ - Copy å’Œ Revert æŒ‰é’®å…±äº« */
.chat-copy-button,
.chat-undo-button {
    width: auto;
    height: 22px;
    min-width: 60px;
    border-radius: 4px;
    border-width: 1px;
    border-color: rgba(120, 120, 120, 0.3);
    background-color: rgba(70, 70, 70, 0.8);
    color: rgba(220, 220, 220, 0.9);
    margin-left: 2px;
    margin-right: 2px;
    font-size: var(--font-size-base);
    padding: 4px 10px;
    transition-duration: 150ms;
    align-items: center;
    justify-content: center;
    -unity-text-align: middle-center;
    white-space: nowrap;
    overflow: visible;
}

/* ä¿®å¤Unity Buttonå†…éƒ¨æ–‡æœ¬å…ƒç´ çš„æ ·å¼é—®é¢˜ */
.chat-copy-button .unity-button__text,
.chat-undo-button .unity-button__text {
    overflow: visible;
    text-overflow: clip;
}

/* æ‚¬åœæ•ˆæœ */
.chat-copy-button:hover,
.chat-undo-button:hover {
    background-color: rgba(120, 120, 120, 0.9);
    border-color: rgba(150, 150, 150, 0.6);
    color: rgba(255, 255, 255, 1);
    transition-duration: 150ms;
}

/* æ¶ˆæ¯å†…å®¹æ ·å¼ */
.message-content {
    flex-direction: column;
    flex-grow: 1;
    flex-shrink: 1;
    width: 100%;
    min-width: 220px;    /* å†…å®¹åŒºåŸŸçš„æœ€å°å®½åº¦ï¼Œé…åˆmessage-bubbleçš„250px */
    min-height: auto;
    align-items: stretch;
    justify-content: flex-start;
    overflow: visible;
}

/* å¢å¼ºå†…å®¹å¤„ç†å®¹å™¨æ ·å¼ */
.processed-content-container {
    flex-direction: column;
    flex-grow: 1;
    flex-shrink: 1;
    width: 100%;
    min-width: 200px;    /* å¤„ç†åå†…å®¹çš„æœ€å°å®½åº¦ï¼Œç¡®ä¿çŸ­å†…å®¹ä¹Ÿæœ‰åˆç†æ˜¾ç¤º */
    min-height: auto;
    align-items: stretch;
    justify-content: flex-start;
    overflow: visible;
    display: flex;
    font-size: var(--font-size-base);
}

.code-blocks {
    flex-direction: column;
    margin-top: 8px;
}

/* é™„ä»¶åŒºåŸŸæ ·å¼ */
.attachments-area {
    margin-top: 12px;
    padding: 8px;
    background-color: rgba(60, 60, 60, 0.4);
    border-radius: 6px;
}

.attachments-scroll {
    max-height: 100px;
}

.attachments-container {
    flex-direction: row;
    flex-wrap: wrap;
}

/* å‡½æ•°è°ƒç”¨åŒºåŸŸæ ·å¼ */
.function-calls-area {
    margin-top: 12px;
    padding: 8px;
    background-color: rgba(80, 60, 40, 0.4);
    border-radius: 6px;
    border-left-width: 3px;
    border-left-color: rgba(255, 180, 100, 0.8);
    max-width: 50%;
    min-width: 500px;
    width: 100%;
}

.function-calls-label {
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    color: rgba(255, 200, 120, 0.9);
    margin-bottom: 8px;
}

.function-calls-container {
    flex-direction: column;
}

/* å‡½æ•°è°ƒç”¨ç»„ä»¶æ ·å¼ */
.function-call {
    background-color: rgba(70, 50, 30, 0.6);
    border-radius: 6px;
    padding: 8px;
    margin-bottom: 6px;
    border-left-width: 2px;
    border-left-color: rgba(255, 180, 100, 0.6);
}

.function-header {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
}

.function-info {
    flex-direction: row;
    align-items: center;
    flex-grow: 1;
}

.function-name {
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    color: rgba(255, 200, 120, 0.9);
    margin-right: 8px;
}

.function-status {
    font-size: var(--font-size-small);
    color: rgba(200, 200, 200, 0.7);
    background-color: rgba(255, 180, 100, 0.2);
    padding: 2px 6px;
    border-radius: 8px;
}

.function-actions {
    flex-direction: row;
}

.approve-button, .reject-button {
    width: 24px;
    height: 24px;
    border-radius: 4px;
    border-width: 0;
    margin-left: 4px;
    font-size: var(--font-size-base);
    transition-duration: 150ms;
}

.approve-button {
    background-color: rgba(100, 200, 100, 0.6);
    color: rgba(255, 255, 255, 0.9);
}

.reject-button {
    background-color: rgba(200, 100, 100, 0.6);
    color: rgba(255, 255, 255, 0.9);
}



.progress-area {
    margin-top: 8px;
    align-items: center;
}

.function-progress {
    width: 100%;
    height: 4px;
    margin-bottom: 4px;
}

.progress-text {
    font-size: var(--font-size-small);
    color: rgba(150, 150, 150, 0.7);
}

/* æ¶ˆæ¯çŠ¶æ€æ ·å¼ */
.message-status {
    flex-direction: row;
    align-items: center;
    margin-top: 0;       /* ğŸ¯ ç§»é™¤ä¸Šè¾¹è·ï¼Œå› ä¸ºçŠ¶æ€æŒ‡ç¤ºå™¨å·²éšè— */
    padding-top: 0;      /* ğŸ¯ ç§»é™¤ä¸Šå†…è¾¹è·ï¼Œå› ä¸ºçŠ¶æ€æŒ‡ç¤ºå™¨å·²éšè— */
    border-top-width: 0; /* ğŸ¯ ç§»é™¤è¾¹æ¡†ï¼Œå› ä¸ºçŠ¶æ€æŒ‡ç¤ºå™¨å·²éšè— */
    border-top-color: transparent;
    height: 0;           /* ğŸ¯ å®Œå…¨éšè—çŠ¶æ€åŒºåŸŸ */
    overflow: hidden;    /* ğŸ¯ ç¡®ä¿å†…å®¹ä¸æ˜¾ç¤º */
}

.status-indicator {
    width: 0;      /* éšè—çŠ¶æ€æŒ‡ç¤ºå™¨åœ†çƒ */
    height: 0;     /* éšè—çŠ¶æ€æŒ‡ç¤ºå™¨åœ†çƒ */
    border-radius: 0;
    margin-right: 0;
    background-color: transparent;
    display: none; /* å®Œå…¨éšè—åœ†çƒ */
}

.status-indicator.sending {
    display: none; /* éšè—å‘é€çŠ¶æ€åœ†çƒ */
}

.status-indicator.sent {
    display: none; /* éšè—å‘é€å®ŒæˆçŠ¶æ€åœ†çƒ */
}

.status-indicator.error {
    display: none; /* éšè—é”™è¯¯çŠ¶æ€åœ†çƒ */
}

.status-text {
    font-size: var(--font-size-small);
    color: rgba(150, 150, 150, 0.7);
}

/* åé¦ˆåŒºåŸŸæ ·å¼ */
.feedback-area {
    flex-direction: row;
    align-items: center;
    justify-content: flex-start; /* æ”¹ä¸ºå·¦å¯¹é½ */
    margin-top: 2px;     /* ğŸ¯ è¿›ä¸€æ­¥å‡å°‘ä¸Šè¾¹è·ï¼Œä¼˜åŒ–ç´§å‡‘åº¦ */
    padding-top: 2px;    /* ğŸ¯ è¿›ä¸€æ­¥å‡å°‘ä¸Šå†…è¾¹è·ï¼Œä¼˜åŒ–ç´§å‡‘åº¦ */
    border-top-width: 0;        /* ç§»é™¤ä¸Šæ–¹åˆ†ç•Œçº¿ */
    border-top-color: transparent;
}

/* ä¸Šä¸‹æ–‡åŒºåŸŸæ ·å¼ */
.context-area {
    padding: 8px 16px;
    background-color: rgba(50, 50, 50, 0.7);
    border-top-width: 1px;
    border-top-color: rgba(100, 100, 100, 0.3);
    max-height: 130px; 
}


/* ä¸Šä¸‹æ–‡é¡¹ç›®æ ·å¼ */

.context-item-content {
    flex-direction: row;
    align-items: center;
}

.file-icon {
    width: 20px;
    height: 20px;
    background-color: rgba(120, 180, 255, 0.8);
    border-radius: 4px;
    margin-right: 8px;
    flex-shrink: 0;
}





.file-size {
    font-size: var(--font-size-small);
    color: rgba(120, 120, 120, 0.8);
}

/* è¾“å…¥åŒºåŸŸæ ·å¼ */
.input-area {
    flex-direction: column;
    flex-shrink: 0;      /* é˜²æ­¢è¾“å…¥åŒºåŸŸè¢«å‹ç¼© */
    padding: 6px 16px 12px 16px;  /* ğŸ¯ å‡å°‘é¡¶éƒ¨é—´è·ï¼Œä¼˜åŒ–ä¸èŠå¤©åŒºçš„è·ç¦» */
    background-color: rgba(40, 40, 40, 0.9);
    border-top-width: 0;    /* å»æ‰ä¸Šé¢çš„åˆ†ç•Œçº¿ */
    border-top-color: transparent;
    max-height: 200px;   /* é™åˆ¶è¾“å…¥åŒºåŸŸæœ€å¤§é«˜åº¦ */
    overflow: visible;   /* å…è®¸ä¸‹æ‹‰èœå•ç­‰å…ƒç´ æ˜¾ç¤º */
}

.drag-drop-area {
    align-items: center;
    justify-content: center;
    padding: 20px;
    background-color: rgba(120, 180, 255, 0.1);
    border-radius: 8px;
    border-width: 2px;
    border-color: rgba(120, 180, 255, 0.4);

    margin-bottom: 12px;
}

.drag-drop-text {
    font-size: var(--font-size-base);
    color: rgba(120, 180, 255, 0.8);
    -unity-font-style: italic;
}

.input-container {
    flex-direction: row;
    align-items: center;
    background-color: rgba(60, 60, 60, 0.8);
    border-radius: 20px;
    padding: 6px;
    margin-bottom: 6px;
}

.input-left {
    margin-right: 8px;
}

.input-center {
    flex-grow: 1;
    margin: 0 8px;
    min-height: 20px;
    max-height: 120px;
}

.message-input-scroll {
    flex-grow: 1;
    max-height: 120px;
    border-width: 0;
    background-color: rgba(0, 0, 0, 0);
}

.message-input-scroll .unity-scroller--vertical {
    width: 8px;
}

.message-input-scroll .unity-scroller--vertical .unity-base-slider__tracker {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    margin: 2px;
}

.message-input-scroll .unity-scroller--vertical .unity-base-slider__dragger {
    background-color: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
    margin: 0;
}

.message-input-scroll .unity-scroller--vertical .unity-base-slider__dragger:hover {
    background-color: rgba(255, 255, 255, 0.5);
}

.message-input-scroll > .unity-scroll-view__content-container {
    flex-grow: 1;
}

.input-right {
    margin-left: 8px;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
}

.attach-button {
    width: 24px;
    height: 24px;
    border-radius: 4px;
    border-width: 0;
    color: rgba(255, 255, 255, 0.7);
    font-size: var(--font-size-larger);
    -unity-font-style: bold;
    transition-duration: 200ms;
    align-items: center;
    justify-content: center;
}

.attach-button:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 1);
    transition-duration: 200ms;
}

.attach-button:active {
    background-color: rgba(88, 166, 255, 0.35);
}

.message-input {
    background-color: rgba(0, 0, 0, 0);
    border-width: 0;
    padding: 8px 12px;
    font-size: var(--font-size-base);
    min-height: 20px;
    flex-shrink: 0;
}

.message-input .unity-text-field__input {
    background-color: rgba(0, 0, 0, 0);
    border-width: 0;
    padding: 0;
    margin: 0;
    color: rgba(220, 220, 220, 0.9);
    white-space: normal;
    overflow: visible;
}

.send-button {
    width: 36px;
    height: 36px;
    border-radius: 18px;
    border-width: 0;
    background-color: rgba(0, 122, 255, 0.9);
    color: rgba(255, 255, 255, 1);
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    transition-duration: 200ms;
    align-items: center;
    justify-content: center;
}

.send-button:hover {
    background-color: rgba(0, 122, 255, 1);
    transition-duration: 200ms;
}

.send-button:active {
    background-color: rgba(0, 100, 220, 1);
    transition-duration: 100ms;
}

.send-button:disabled {
    background-color: rgba(80, 80, 80, 0.5);
    color: rgba(150, 150, 150, 0.6);
}

.input-hints {
    margin-top: 4px;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
}

.hints-left {
    flex-grow: 1;
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
}

.hints-right {
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
}

.token-usage-text {
    font-size: var(--font-size-base);
    color: rgba(199, 199, 199, 0.56);
    -unity-text-align: middle-right;
    -unity-font-style: normal;
    margin-right: 8px;
}

/* Orchestrator mode toggle styles - capsule style */
.orchestrator-mode-toggle {
    width: 36px;
    height: 18px;
    margin-left: 8px;
    margin-right: 0;
    flex-shrink: 0;
}

.orchestrator-mode-toggle > Label {
    display: none;
}

.orchestrator-mode-toggle > .unity-toggle__input {
    width: 36px;
    height: 18px;
    min-width: 36px;
    min-height: 18px;
    border-radius: 9px;
    background-color: rgba(60, 60, 60, 0.8);
    border-width: 1px;
    border-color: rgba(100, 100, 100, 0.5);
    transition-duration: 0.2s;
    margin: 0;
    padding: 0;
}

.orchestrator-mode-toggle:checked > .unity-toggle__input {
    background-color: rgba(80, 150, 255, 0.8);
    border-color: rgba(120, 180, 255, 0.9);
}

.orchestrator-mode-toggle > .unity-toggle__input > .unity-toggle__checkmark {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background-color: rgba(220, 220, 220, 1);
    margin: 1px;
    transition-duration: 0.2s;
    -unity-background-image-tint-color: rgba(0, 0, 0, 0);
    background-image: none;
}

.orchestrator-mode-toggle:checked > .unity-toggle__input > .unity-toggle__checkmark {
    translate: 18px 0;
    background-color: rgba(255, 255, 255, 1);
}

.orchestrator-mode-toggle:hover > .unity-toggle__input {
    border-color: rgba(120, 180, 255, 0.7);
}

/* Orchestrator mode label - independent label next to toggle */
.orchestrator-mode-label {
    font-size: 11px;
    color: rgba(199, 199, 199, 0.7);
    margin-left: 6px;
    -unity-font-style: normal;
    flex-shrink: 0;
}

/* å·¥å…·ä¸‹æ‹‰å¼¹çª—æ ·å¼ */
.tools-dropdown {
    position: relative;
    flex-direction: column;
    align-items: flex-end;
    margin-left: 8px;
}


.tools-panel {
    position: absolute;
    top: 38px;
    right: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: rgba(20, 20, 20, 0.95);
    border-radius: 8px;
    padding: 8px;
    border-width: 1px;
    border-color: rgba(80, 80, 80, 0.6);
    min-width: 60px;
    min-height: 60px;
}

/* CSS classes removed - display state now controlled by C# code */

.tools-panel-label {
    color: rgba(255, 255, 255, 0.8);
    font-size: var(--font-size-base);
    padding: 8px;
    -unity-text-align: middle-center;
}

/* æ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨æ ·å¼ */
.typing-indicator {
    flex-direction: row;
    align-items: center;
    justify-content: center;
    padding: 12px;
    background-color: rgba(50, 50, 50, 0.8);
    border-top-width: 1px;
    border-top-color: rgba(100, 100, 100, 0.3);
}

/* è¾“å…¥åŒºåŸŸå†…çš„AI thinkingæŒ‡ç¤ºå™¨æ ·å¼ */
.input-typing-indicator {
    flex-direction: row;
    align-items: center;
    justify-content: flex-start;
    padding: 8px 12px;
    margin-bottom: 8px;
    background-color: rgba(60, 60, 60, 0.6);
    border-radius: 12px;
    border-width: 0;
    border-top-width: 0;
    border-top-color: transparent;
}

.typing-dots {
    flex-direction: row;
    margin-right: 8px;
}

.typing-dot {
    width: 6px;
    height: 6px;
    border-radius: 3px;
    background-color: rgba(120, 180, 255, 0.8);
    margin: 0 2px;
    /* Animation would be added via C# */
}

.typing-text {
    font-size: var(--font-size-base);
    color: rgba(150, 150, 150, 0.8);
    -unity-font-style: italic;
}

/* æ¶ˆæ¯é˜Ÿåˆ—åŒºåŸŸæ ·å¼ */
.message-queue-area {
    flex-direction: column;
    margin-bottom: 8px;
    padding: 8px 12px;
    background-color: rgba(70, 70, 70, 0.6);
    border-radius: 12px;
    border-width: 1px;
    border-color: rgba(120, 180, 255, 0.3);
}

.queue-label {
    font-size: var(--font-size-small);
    color: rgba(120, 180, 255, 0.8);
    margin-bottom: 6px;
    -unity-font-style: bold;
}

.message-queue-scroll {
    max-height: 100px;
    overflow: hidden;
}

.message-queue-container {
    flex-direction: column;
}

.queue-message-item {
    flex-direction: row;
    align-items: center;
    padding: 4px 8px;
    margin-bottom: 2px;
    background-color: rgba(80, 80, 80, 0.5);
    border-radius: 8px;
    border-width: 1px;
    border-color: rgba(100, 100, 100, 0.2);
}

.queue-message-content {
    font-size: var(--font-size-base);
    color: rgba(200, 200, 200, 0.9);
    flex-grow: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.queue-message-index {
    font-size: var(--font-size-small);
    color: rgba(120, 180, 255, 0.7);
    margin-right: 8px;
    min-width: 16px;
    -unity-text-align: middle-center;
    background-color: rgba(120, 180, 255, 0.2);
    border-radius: 8px;
    padding: 2px 4px;
}


/* USS ä¸æ”¯æŒåª’ä½“æŸ¥è¯¢ï¼Œä½¿ç”¨ç»Ÿä¸€çš„å“åº”å¼æ ·å¼ */

/* æ»šåŠ¨æ¡æ ·å¼ */
.chat-history {
    flex-grow: 1;        /* Outer container can fill space */
    flex-shrink: 1;      /* Allow shrinking */
    padding: 4px 4px 2px 4px;  /* ğŸ¯ Reduce bottom spacing, optimize distance to input area */

    max-height: 100%;
    overflow: hidden;    /* Overflow handled by scroll view */
    -unity-overflow-clip-box: content-box;
}

.chat-history .unity-scroll-view__vertical-scroller {
    width: 8px;
    background-color: rgba(100, 100, 100, 0.2);
    border-radius: 4px;
}

.chat-history .unity-scroll-view__vertical-scroller .unity-scroller__slider {
    background-color: rgba(120, 180, 255, 0.6);
    border-radius: 4px;
    margin: 2px;
}

.chat-history .unity-scroll-view__vertical-scroller .unity-scroller__slider:hover {
    background-color: rgba(140, 200, 255, 0.8);
}

/* ç¡®ä¿æ»šåŠ¨è§†å›¾å†…å®¹ä»é¡¶éƒ¨å¼€å§‹æ’å¸ƒ */
.chat-history .unity-scroll-view__content-container {
    flex-grow: 0;        /* ä¸è‡ªåŠ¨å¡«å……ç©ºé—´ï¼Œé¿å…å‡åŒ€åˆ†å¸ƒæ¶ˆæ¯ */
    flex-shrink: 0;      /* No auto-shrink */
    max-width: 100%;
    min-height: auto;    /* Auto-adjust height based on content */
    flex-direction: column;    /* ç¡®ä¿å‚ç›´æ’åˆ— */
    justify-content: flex-start;  /* å¼ºåˆ¶ä»é¡¶éƒ¨å¼€å§‹ */
    align-items: stretch;      /* æ‹‰ä¼¸åˆ°å®¹å™¨å®½åº¦ */
}

/* ==============================================
   é™„ä»¶ç•Œé¢æ ·å¼ (Attachment Styles)
   ============================================== */

/* é™„ä»¶é¡¹ç›®å®¹å™¨ */
.context-item {
    margin: 8px 4px 4px 4px;
    border-radius: 8px;
    background-color: rgba(40, 40, 40, 0.8);
    border-width: 1px;
    border-color: rgba(80, 80, 80, 0.5);
    overflow: visible; /* æ”¹ä¸ºå¯è§ï¼Œç¡®ä¿åˆ é™¤æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸ */
    transition-duration: 200ms;
    position: relative; /* ä¸ºç»å¯¹å®šä½çš„åˆ é™¤æŒ‰é’®æä¾›å‚è€ƒç‚¹ */
    min-width: 180px;
    max-width: 250px;
    flex-direction: column;
}

.context-item:hover {
    background-color: rgba(50, 50, 50, 0.9);
    border-color: rgba(100, 100, 100, 0.7);
    transition-duration: 200ms;
}

/* é™„ä»¶åˆ é™¤æŒ‰é’®æ ·å¼ */
.attachment-remove-button {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: rgba(255, 59, 48, 0.9);
    border-width: 2px;
    border-color: rgba(255, 255, 255, 0.9);
    color: rgba(255, 255, 255, 1);
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    -unity-text-align: middle-center;
    padding: 0;
    margin: 0;
    transition-duration: 150ms;
    opacity: 0;
    /* é»˜è®¤éšè—ï¼Œåªåœ¨hoveræ—¶æ˜¾ç¤º */
}

.context-item:hover .attachment-remove-button {
    opacity: 1;
    transition-duration: 150ms;
}

.attachment-remove-button:hover {
    background-color: rgba(255, 89, 78, 1);
    border-color: rgba(255, 255, 255, 1);
    border-width: 3px; /* å¢åŠ è¾¹æ¡†å®½åº¦æä¾›hoveråé¦ˆ */
    transition-duration: 150ms;
}

.attachment-remove-button:active {
    background-color: rgba(255, 29, 18, 1);
    border-width: 1px; /* å‡å°‘è¾¹æ¡†å®½åº¦æä¾›activeåé¦ˆ */
    transition-duration: 100ms;
}

.item-container {
    flex-direction: row;
    align-items: center;
    padding: 6px 8px; /* å‡å°‘ä¸Šä¸‹paddingï¼Œä¼˜åŒ–ç©ºé—´åˆ©ç”¨ */
    min-height: 56px; /* ç•¥å¾®å‡å°‘æœ€å°é«˜åº¦ */
    margin-bottom: 4px;
}

/* ç¼©ç•¥å›¾å®¹å™¨ */
.thumbnail-container {
    width: 48px;
    height: 48px;
    margin-right: 12px;
    position: relative;
    flex-shrink: 0;
    border-radius: 4px;
    overflow: hidden;
}

/* ç±»å‹è¾¹æ¡† - åŸºç¡€æ ·å¼ */
.type-border {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 6px;
    border-width: 2px;
    border-color: rgba(100, 100, 100, 0.5);
}

/* ä¸åŒç±»å‹çš„é¢œè‰²è¾¹æ¡† */
.type-border.type-code {
    border-color: rgba(0, 122, 255, 0.8); /* è“è‰² - ä»£ç æ–‡ä»¶ */
}

.type-border.type-image {
    border-color: rgba(255, 149, 0, 0.8); /* æ©™è‰² - å›¾åƒæ–‡ä»¶ */
}

.type-border.type-scene {
    border-color: rgba(76, 217, 100, 0.8); /* ç»¿è‰² - Unityåœºæ™¯ */
}

.type-border.type-prefab {
    border-color: rgba(255, 59, 48, 0.8); /* çº¢è‰² - Prefab */
}

.type-border.type-asset {
    border-color: rgba(175, 82, 222, 0.8); /* ç´«è‰² - Unityèµ„æº */
}

.type-border.type-directory {
    border-color: rgba(255, 204, 0, 0.8); /* é»„è‰² - æ–‡ä»¶å¤¹ */
}

.type-border.type-reference {
    border-color: rgba(90, 200, 250, 0.8); /* æµ…è“è‰² - å¼•ç”¨ */
}

.type-border.type-file {
    border-color: rgba(142, 142, 147, 0.8); /* ç°è‰² - é€šç”¨æ–‡ä»¶ */
}

/* ç¼©ç•¥å›¾å›¾ç‰‡ */
.thumbnail-image {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 4px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* ç±»å‹å›¾æ ‡ */
.type-icon {
    position: absolute;
    width: 100%;
    height: 100%;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    background-color: rgba(30, 30, 30, 0.9);
}

.type-icon-text {
    font-size: var(--font-size-base);
    color: rgba(255, 255, 255, 0.8);
    -unity-text-align: middle-center;
    -unity-font-style: bold;
}

/* ç±»å‹æ ‡ç­¾ */
.type-label {
    position: absolute;
    bottom: -2px;
    right: -2px;
    background-color: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 0.9);
    font-size: var(--font-size-small);
    padding: 1px 3px;
    border-radius: 3px;
    -unity-font-style: bold;
    border-width: 1px;
    border-color: rgba(60, 60, 60, 0.8);
}

/* æ–‡ä»¶ä¿¡æ¯åŒºåŸŸ */
.file-info {
    flex-grow: 1;
    flex-direction: column;
    justify-content: center;
    margin-right: 8px;
    min-width: 0;
    overflow: hidden;
}

.file-name {
    font-size: var(--font-size-base);
    color: rgba(240, 240, 240, 0.95);
    -unity-font-style: bold;
    margin-bottom: 2px;
    overflow: hidden;

}

.file-details {
    font-size: var(--font-size-small);
    color: rgba(180, 180, 180, 0.8);
    margin-bottom: 2px;
}

.file-path {
    font-size: var(--font-size-small);
    color: rgba(140, 140, 140, 0.7);
    -unity-font-style: italic;
    overflow: hidden;

}

/* ç§»é™¤é‡å¤çš„context-areaæ ·å¼å®šä¹‰ï¼Œå·²åœ¨ä¸Šæ–¹ç»Ÿä¸€å®šä¹‰ */

.context-label {
    font-size: var(--font-size-base);
    color: rgba(180, 180, 180, 0.9);
    margin-bottom: 8px;
    -unity-font-style: bold;
}

.context-scroll {
    max-height: 98px;
    background-color: rgba(0, 0, 0, 0);
}

.context-container {
    flex-direction: row;
    flex-wrap: wrap;
    align-items: flex-start;
}

/* å–æ¶ˆæŒ‰é’®æ ·å¼ */
.cancel-button {
    width: 36px;
    height: 36px;
    border-radius: 18px;
    border-width: 0;
    background-color: rgba(220, 60, 60, 0.9);
    color: white;
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    margin-left: 4px;
    transition-duration: 200ms;
    align-items: center;
    justify-content: center;
}

.cancel-button:hover {
    background-color: rgba(240, 70, 70, 1);
    transition-duration: 200ms;
}

.cancel-button:active {
    background-color: rgba(200, 50, 50, 1);
    transition-duration: 100ms;
}

/* å·¥å…·ä¸‹æ‹‰æ¡†æ ·å¼ */
.tools-toggle-button {
    width: 28px;
    height: 28px;
    border-radius: 50%; /* åœ†å½¢ï¼Œä¸New ChatæŒ‰é’®ä¸€è‡´ */
    background-color: transparent;
    border-width: 0;
    margin: 3px 8px 3px 4px;
    font-size: var(--font-size-base);
    -unity-font-style: bold;
    color: var(--unity-colors-default-text-inactive);
    transition-duration: 0.2s;
}

.tools-toggle-button:hover {
    background-color: rgba(120, 180, 255, 0.25);
    color: rgba(255, 255, 255, 1);
    border-width: 1px;
    border-color: rgba(120, 180, 255, 0.8);
    transition-duration: 0.15s;
}

.tools-toggle-button:active {
    background-color: var(--unity-colors-helpbox-background-selected);
}

/* ä¸‹æ‹‰æ¡†å±•å¼€æ—¶çš„æŒ‰é’®çŠ¶æ€ */
.tools-toggle-button.expanded {
    background-color: rgba(120, 180, 255, 0.35);
    border-width: 1px;
    border-color: rgba(120, 180, 255, 1);
    color: rgba(255, 255, 255, 1);
}

.tools-dropdown-content {
    border-radius: 16px; /* çœŸæ­£çš„èƒ¶å›Šå½¢çŠ¶ï¼šå®½åº¦çš„ä¸€åŠï¼Œä¸¤ç«¯åŠåœ†ä¸­é—´ç›´è¾¹ */
    overflow: hidden;
    margin-top: 2px; /* ä¸æŒ‰é’®ä¿æŒå°é—´è· */ 
    transition: height 0.25s ease-in-out, opacity 0.25s ease-in-out;
}

.tools-dropdown-content.collapsed {
    height: 0px;
    opacity: 0;
}

.tools-dropdown-content.expanded {
    height: 66px; /* è°ƒæ•´é«˜åº¦ä»¥é€‚åº”åœ†å½¢æŒ‰é’®å’Œå†…è¾¹è· */
    opacity: 1;
}

.tools-dropdown-button {
    border-radius: 50%; /* åœ†å½¢æŒ‰é’® */
    transition-duration: 0.15s;
    border-width: 0;
}

.tools-dropdown-button:hover {
    background-color: rgba(255, 255, 255, 0.3) !important;
    transition-duration: 0.15s;
}

.tools-dropdown-button:active {
    transition-duration: 0.1s;
}

